# ControlNet Canny


## 介绍


ControlNet Canny 是一种将图像边缘信息作为条件输入，指导 Stable Diffusion 或其他图像生成模型进行控制性生成的方法。

它使用的是 Canny 边缘检测算法，这是一种经典的图像处理技术，用来提取图像中的主要轮廓线条。通过将这些边缘线输入到 ControlNet 中，模型能在生成图像时尽可能遵循原图的结构轮廓。


## 工作流程


1. 输入图像（原图或摄影图）：
2. 提取 Canny 边缘图：使用 OpenCV 等工具进行边缘检测，输出黑白线稿。
3， 边缘图作为条件送入 ControlNet： 作为“条件提示”，引导图像生成模型在生成时遵循这些边缘结构。
4. 结合文本提示词生成图像： 可以添加 prompt，例如 "a cyberpunk city at night"，在结构不变的前提下改变风格


## 应用场景

图像风格迁移：保持结构，改变风格（如照片转卡通、素描转油画）

建筑设计草图增强：从结构图生成真实场景

角色再创作：保留角色动作和形体，换装、换风格

动漫线稿着色：配合其他条件生成上色图像

自动构图保留：用于图像处理或编辑时保持大致轮廓不变

## 优点

结构保留好：不容易“跑偏”，适合需要精准控制布局的场景

无需手绘：使用现有图像即可自动生成边缘图

泛用性强：搭配不同风格 prompt 能生成不同风格的图像


## 注意事项

过多细节可能干扰生成：复杂的边缘图会让模型难以聚焦重要结构

轮廓图质量影响大：边缘提取得好坏直接影响生成效果

不能改变结构：适合结构保持一致的任务，不适合自由构图


## 工作流

[controlnet-canny.json](./controlnet-canny.json)  


## 效果

输出 canny 图：


![](./canny-input.png)  


输出图像：


![](./canny-output.png)  


## 参考









